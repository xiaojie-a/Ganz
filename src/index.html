<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

  <link rel="stylesheet" href="index.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- 引入 Bootstrap JS 和依赖项（Popper.js 和 jQuery） -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>


  <!-- <script src="./renderer.js" type="text/javascript"></script> -->
</head>

<body>
  <script src="https://sparkly-frangollo-7c1e65.netlify.app/data.js"></script>npm run make
  <!-- 头部控制按钮 -->
  <div id="meun">
    <div id="logo" style="display:block; width: 80px;"><img src="body/img/logo.png" style="width:100%;"></div>
    <div class="zijit">
      <div id="EXT"><svg t="1657416825188" class="icon" viewBox="0 0 1024 1024" version="1.1"
          xmlns="http://www.w3.org/2000/svg" p-id="3693" width="20" height="20">
          <path
            d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"
            fill="#444444" p-id="3694"></path>
        </svg></div>
    </div>
    <div class="FH">
      <div id="max"><svg t="1742981032607" class="icon" viewBox="0 0 1024 1024" version="1.1"
          xmlns="http://www.w3.org/2000/svg" p-id="2611" width="20" height="20">
          <path d="M199.111111 256v512h625.777778v-512z m56.888889 455.111111v-341.333333h512v341.333333z" p-id="2612">
          </path>
        </svg></div>
    </div>

    <div class="ziji">
      <div id="mini"><svg t="1741122434160" class="icon" viewBox="0 0 1024 1024" version="1.1"
          xmlns="http://www.w3.org/2000/svg" p-id="3522" width="20" height="20">
          <path
            d="M863.7 552.5H160.3c-10.6 0-19.2-8.6-19.2-19.2v-41.7c0-10.6 8.6-19.2 19.2-19.2h703.3c10.6 0 19.2 8.6 19.2 19.2v41.7c0 10.6-8.5 19.2-19.1 19.2z"
            p-id="3523"></path>
        </svg></div>
    </div>

  </div>
  <!-- body -->
  <div id="le">
    <div id="home" onclick="URLS('body/home.html','#home .zst')">
      <div class="TZ">
        <div class="zst" style="background-color:rgb(0, 196, 0);"></div>
      </div>
      <svg t="1662194234204" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="2361" width="40" height="40">
        <path
          d="M937.067069 482.335377 556.719504 106.839307c-1.89107-2.251274-6.123464-6.173606-11.997242-10.048867-9.889231-6.522554-21.093411-10.486842-33.388435-10.486842-13.137205 0-24.610514 3.984754-34.245965 10.590196-5.826705 3.997034-9.844206 8.076956-12.117992 11.117199L85.643566 482.381425c-14.653745 14.434757-14.653745 37.890982 0 52.358485 14.538111 14.380522 33.883715 8.316409 50.366108-7.919367L161.532977 501.587859l350.847693-339.869664 374.329501 368.073007c20.077268 13.223163 37.773302 17.377786 50.358945 4.946662C951.720813 520.273431 951.720813 496.801856 937.067069 482.335377z"
          p-id="2362"></path>
        <path
          d="M793.007045 462.046285c-17.391089 0-31.567973 13.938454-31.634488 31.236422l0 0.085958 0 0.089028 0 350.143659c0 17.416671-14.371312 31.602765-32.119535 31.602765l-84.129072 0 0-192.166671c0-49.818639-40.803311-90.111321-91.14486-90.111321l-85.268012 0c-50.326199 0-91.143836 40.300868-91.143836 90.111321l0 192.166671L293.437146 875.204116c-17.750269 0-32.119535-14.186094-32.119535-31.602765L261.317611 493.391177c-0.033769-17.355273-14.21884-31.343869-31.611975-31.343869-17.418718 0-31.589462 13.96506-31.658024 31.302937l0 354.429265c0 49.844222 40.808428 90.133833 91.14486 90.133833l141.253094 0 10.389628 0 0-10.391674 0-240.262062c0-17.410532 14.365172-31.580253 32.119535-31.580253l76.801177 0c17.756409 0 32.119535 14.169721 32.119535 31.580253l0 240.262062 0 10.391674 10.391674 0 141.253094 0c50.321082 0 91.14486-40.297798 91.14486-90.133833L824.665069 493.322615C824.527946 475.958132 810.380738 462.046285 793.007045 462.046285z"
          p-id="2363"></path>
      </svg>
      <samp class="lt">主页</samp>
    </div>
    <div id="mz" onclick="URLS('body/yingy.html','#mz .zst')">
      <div class="TZ">
        <div class="zst"></div>
      </div>
      <svg t="1662548633517" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="5472" width="40" height="40">
        <path
          d="M760.6272 193.7664a98.816 98.816 0 0 1 34.4832 69.888l0.1792 5.8624-0.0256 29.2096-62.8992 9.7536v-38.9632c0-8.2176-2.56-15.9744-7.168-22.144l-2.4832-2.9696-2.816-2.6624a29.696 29.696 0 0 0-20.992-7.296l-3.2512 0.384-289.1776 47.9488c-14.6432 2.4576-25.6512 15.232-27.0592 31.232l-0.1536 3.456v117.6576l359.3472-57.472a32 32 0 0 1 2.048-0.256l54.6048-8.448v290.56l-0.1024 1.28c-0.0512 0.2304-0.128 0.2304-0.256-0.1792 0.9984 5.4784 1.4848 10.9056 1.4848 16.384 0 59.4944-55.8848 107.3664-124.0832 107.3664-68.1984 0-124.0832-47.872-124.0832-107.392s55.8848-107.392 124.0832-107.392c18.2272 0 35.8912 3.4304 51.9936 9.9072l6.8096 2.944 1.2544 0.64V442.368l-353.1008 56.4736v246.2464c0 59.52-55.9104 107.392-124.0832 107.392-68.1984 0-124.0832-47.872-124.0832-107.392s55.8848-107.392 124.0832-107.392c18.9952 0 37.376 3.712 54.016 10.7008l7.1168 3.2512V317.4656c0-44.8768 28.928-83.2256 70.1184-94.592l4.7872-1.2032 4.9152-0.9472L685.312 172.7488a92.8512 92.8512 0 0 1 75.3152 20.992zM255.1808 700.5952c-34.0992 0-61.1584 20.48-61.1584 44.4416 0 23.9872 27.0592 44.4672 61.1584 44.4672 34.0992 0 61.1328-20.48 61.1328-44.4672 0-23.9616-27.0336-44.4416-61.1328-44.4416z m417.0752-68.096c-34.0736 0-61.1328 20.5056-61.1328 44.4672s27.0592 44.4672 61.1328 44.4672c34.1504 0 61.184-20.48 61.1584-44.4672 0-23.9616-27.0592-44.4416-61.1584-44.4416z"
          p-id="5473"></path>
      </svg>
      <samp class="lt">音乐</samp>
    </div>
    <div id="sp" onclick="URLS('body/bizhi.html','#sp .zst')">
      <div class="TZ">
        <div class="zst"></div>
      </div>
      <svg t="1741122263990" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="1589" width="40" height="40">
        <path
          d="M938.666667 553.92V768c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V256c0-64.8 52.533333-117.333333 117.333334-117.333333h618.666666c64.8 0 117.333333 52.533333 117.333334 117.333333v297.92z m-64-74.624V256a53.333333 53.333333 0 0 0-53.333334-53.333333H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v344.48A290.090667 290.090667 0 0 1 192 597.333333a286.88 286.88 0 0 1 183.296 65.845334C427.029333 528.384 556.906667 437.333333 704 437.333333c65.706667 0 126.997333 16.778667 170.666667 41.962667z m0 82.24c-5.333333-8.32-21.130667-21.653333-43.648-32.917333C796.768 511.488 753.045333 501.333333 704 501.333333c-121.770667 0-229.130667 76.266667-270.432 188.693334-2.730667 7.445333-7.402667 20.32-13.994667 38.581333-7.68 21.301333-34.453333 28.106667-51.370666 13.056-16.437333-14.634667-28.554667-25.066667-36.138667-31.146667A222.890667 222.890667 0 0 0 192 661.333333c-14.464 0-28.725333 1.365333-42.666667 4.053334V768a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V561.525333zM320 480a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0-64a32 32 0 1 0 0-64 32 32 0 0 0 0 64z"
          fill="#000000" p-id="1590"></path>
      </svg>
      <samp class="lt">壁纸</samp>
    </div>
    <div id="LT" onclick="TC()"><img id="YTS" src=""
        style="width: 90%; float: left; border-radius: 100%; margin-top: 50px;"></div>
    <div id="sz" onclick="URLS('body/sz.html','#sz .zst')">
      <div class="TZ">
        <div class="zst"></div>
      </div>
      <svg t="1662195495726" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="3292" width="40" height="40">
        <path
          d="M872.554667 306.304c-22.613333 8.128-45.696 9.941333-69.162667 4.373333a119.722667 119.722667 0 0 1-85.504-158.144c1.749333-4.842667 0.853333-6.954667-3.605333-8.96-17.92-8.106667-35.541333-16.917333-53.674667-24.533333-11.925333-4.992-24.533333-8.384-36.501333-12.373333-23.146667 47.658667-59.456 74.88-112.064 74.88-52.821333 0-89.258667-27.306667-111.978667-74.538667a411.733333 411.733333 0 0 0-95.530667 39.573333c17.216 49.493333 10.922667 94.634667-26.538666 131.925334-37.376 37.205333-82.496 43.712-131.776 26.282666A413.290667 413.290667 0 0 0 106.666667 400.298667c46.933333 22.656 74.197333 58.666667 74.517333 110.997333 0.32 53.162667-26.986667 89.770667-74.538667 112.768a410.154667 410.154667 0 0 0 39.637334 95.530667c47.808-16.789333 91.669333-11.370667 128.64 23.253333 39.957333 37.44 47.274667 83.626667 29.653333 134.933333a404.949333 404.949333 0 0 0 95.530667 39.466667c23.04-47.36 59.349333-74.474667 111.978666-74.453333 52.885333 0.064 89.216 27.541333 111.893334 74.538666a411.584 411.584 0 0 0 95.488-39.616c-17.386667-49.493333-10.816-94.4 26.24-131.626666 37.290667-37.418667 82.432-43.776 132.053333-26.538667a407.637333 407.637333 0 0 0 39.509333-95.509333c-47.786667-23.210667-74.986667-59.946667-74.517333-113.066667 0.448-52.053333 27.562667-87.957333 74.56-110.656a420.394667 420.394667 0 0 0-38.016-92.970667c-2.048-3.712-4.309333-1.92-6.762667-1.066666z m85.952 82.794667a42.666667 42.666667 0 0 1-22.613334 49.642666c-34.602667 16.725333-50.176 39.146667-50.453333 72.618667-0.298667 34.282667 15.253333 57.194667 50.496 74.304a42.666667 42.666667 0 0 1 22.549333 49.536 450.304 450.304 0 0 1-43.669333 105.472 42.666667 42.666667 0 0 1-51.050667 19.178667c-36.650667-12.736-63.850667-7.68-87.808 16.362666-23.914667 24.021333-28.949333 51.093333-16.213333 87.381334a42.666667 42.666667 0 0 1-19.072 51.178666 454.229333 454.229333 0 0 1-105.344 43.690667 42.666667 42.666667 0 0 1-49.770667-22.592c-16.725333-34.688-39.509333-50.368-73.493333-50.389333-33.92-0.021333-56.597333 15.509333-73.578667 50.432a42.666667 42.666667 0 0 1-49.322666 22.570666 447.338667 447.338667 0 0 1-105.6-43.562666 42.666667 42.666667 0 0 1-19.328-50.986667c13.034667-37.973333 7.381333-65.728-18.474667-89.941333-23.594667-22.101333-50.090667-26.517333-85.333333-14.144a42.666667 42.666667 0 0 1-51.157334-19.050667 452.821333 452.821333 0 0 1-43.733333-105.450667 42.666667 42.666667 0 0 1 22.549333-49.706666c35.072-16.938667 50.666667-39.808 50.453334-74.069334-0.213333-33.642667-15.786667-56.149333-50.389334-72.853333A42.666667 42.666667 0 0 1 65.493333 389.12a455.808 455.808 0 0 1 43.541334-105.344 42.666667 42.666667 0 0 1 51.392-19.242667c36.096 12.778667 63.317333 7.722667 87.466666-16.298666 24-23.893333 29.034667-51.072 16.32-87.68a42.666667 42.666667 0 0 1 19.178667-51.050667 454.4 454.4 0 0 1 105.386667-43.669333 42.666667 42.666667 0 0 1 49.706666 22.656c16.725333 34.730667 39.509333 50.389333 73.536 50.368 33.898667 0 56.576-15.616 73.664-50.837334a42.666667 42.666667 0 0 1 51.882667-21.845333c2.517333 0.832 4.992 1.621333 9.28 2.965333l7.530667 2.346667c8.96 2.88 15.786667 5.290667 22.698666 8.192 10.154667 4.245333 18.090667 7.872 35.029334 15.829333 10.069333 4.736 14.4 6.741333 19.733333 9.152 25.024 11.306667 35.349333 36.821333 26.154667 62.336-16 44.352 9.344 91.221333 55.253333 102.144 14.805333 3.52 29.418667 2.538667 44.864-3.029333a33.28 33.28 0 0 1 4.48-1.621333c5.269333-1.621333 10.88-2.453333 17.322667-1.941334 16.853333 1.344 29.525333 11.093333 36.736 24.170667a462.890667 462.890667 0 0 1 41.813333 102.357333zM522.666667 320a202.666667 202.666667 0 1 0 166.4 86.954667 21.333333 21.333333 0 0 0-35.008 24.384 160 160 0 1 1-69.184-56.128 21.333333 21.333333 0 0 0 16.597333-39.317334A202.090667 202.090667 0 0 0 522.666667 320z"
          fill="#3D3D3D" p-id="3293"></path>
      </svg>
      <samp class="lt">设置</samp>
    </div>

  </div>

  <div id="tab_1">
    <iframe id="URL3" src="gc.html" style="width: 100%; height: 100%;" frameborder="0" scrolling="0"></iframe>
    <iframe id="URL" src="body/home.html" style="width: 100%; height: 100%;" frameborder="0" scrolling="0"></iframe>
    <iframe id="URL2" src="404.html" style="width: 100%; height: 100%;" frameborder="0" scrolling="0"></iframe>

  </div>
  <div id="audio-container">
    <img id="YT" src="" style="height: 80px; float: left;" onclick="YT()">
    <p id="YN" style="height: 10px; float: left; margin-top: 5px; margin-left: 10px;"></p>
    <p id="zz" style="height: 10px; float: left; margin-top: 5px; margin-left: 20px; color: #b8b8b8; "></p>

    <p id="zx" onclick="GB()" style="height: 10px; float: right; margin-top: 5px; margin-right: 30px; "><svg
        t="1657416825188" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="3693" width="20" height="20">
        <path
          d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"
          fill="#444444" p-id="3694"></path>
      </svg></p>
    <p id="zx" onclick="ZX()" style="height: 10px; float: right; margin-top: 5px; margin-right: 30px; "><svg
        t="1741122434160" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="3522" width="20" height="20">
        <path
          d="M863.7 552.5H160.3c-10.6 0-19.2-8.6-19.2-19.2v-41.7c0-10.6 8.6-19.2 19.2-19.2h703.3c10.6 0 19.2 8.6 19.2 19.2v41.7c0 10.6-8.5 19.2-19.1 19.2z"
          p-id="3523"></path>
      </svg></p>

    <audio id="audio" controls></audio>
  </div>

  <!-- 模态框 -->
  <div class="modal fade" id="myModal" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <!-- 模态框头部 -->
        <div class="modal-header">
          <h6 class="modal-title">检测到本地数据与服务器不一致，建议立即更新数据。</h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <!-- 模态框内容 -->
        <div class="modal-body">

          更新内容：<br>
          <p id="nr" style="color: brown;"></p>
          <div class="progress">
            <div class="progress-bar" style="width:0%"></div>
          </div>
        </div>

        <!-- 模态框底部 -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" onclick="triggerDownload()">开始下载</button>
        </div>

      </div>
    </div>
  </div>
  <!-- 前后端通信 -->
  <script>
    window.addEventListener('storage', function (event) {
      if (event.key === 'YYURL') {
        let url = 'https://api.qijieya.cn/meting/?type=url&id=' + JSON.parse(localStorage.getItem('YYURL')).id
        console.log(url);
        document.getElementById('YT').src = JSON.parse(localStorage.getItem('YYURL')).al.picUrl
        document.getElementById('zz').innerHTML = "——" + JSON.parse(localStorage.getItem('YYURL')).ar[0].name
        document.getElementById('YTS').src = JSON.parse(localStorage.getItem('YYURL')).al.picUrl
        document.getElementById('YN').innerHTML = JSON.parse(localStorage.getItem('YYURL')).name
        document.getElementById('audio-container').setAttribute('style', 'bottom: 0px ;')
        audio.src = url;
        //https://api.qijieya.cn/meting/?type=url&id='+items.songs[index].id
        // 重新加载音频
        audio.load();
        // 自动播放（可选）
        audio.play().catch(error => {
          console.error('Autoplay failed:', error);
        })
      }
    });
    let s = 0;
    function ZX() {
      if (s != 0) {
        s = 0;
        document.getElementById("URL3").style.top = "100%";
      }


      document.getElementById('audio-container').setAttribute('style', 'bottom: -90px ;')
      i = i + 1;
    };
    function GB() {
      if (s != 0) {
        s = 0;
        document.getElementById("URL3").style.top = "100%";
      }
      document.getElementById('audio-container').setAttribute('style', 'bottom: -90px ;')
      localStorage.setItem('YYURL', []);
      document.getElementById('YTS').src = ''
      audio.load();
      i = 0;
    };
    let i = 0;
    function TC() {
      console.log(i);
      if (i == 0) {
        document.getElementById('audio-container').setAttribute('style', 'bottom: -90px ;')
        i = i + 1;
      } else {
        document.getElementById('audio-container').setAttribute('style', 'bottom: 0px ;')
        i = 0;
      }

    };

    console.log(data.nr[0]);
    console.log(data.gx);
    document.getElementById("nr").innerHTML = data.nr[0];
    let { ipcRenderer } = require('electron');

    ipcRenderer.on('download-progress', (event, data) => {
      console.log(`下载进度：${data.progress}%`);
      const progressBar = document.querySelector('.progress-bar');
      progressBar.style.width = `${data.progress}%`;
    });


    // 通过按钮触发下载（可选）
    function triggerDownload() {
      ipcRenderer.send('request-download');
    }



    ipcRenderer.send('gx-data', data); //向主进程发送js文件中的信息
    ipcRenderer.on('data-received', (event, response) => {
      console.log('主进程响应:', response); // 输出：主进程已接收数据
    });
    ipcRenderer.on('gx', (event) => {

      // 你可以在这里更新 DOM 或执行其他操作

      const myModal = new bootstrap.Modal(document.getElementById('myModal'));
      myModal.show();

    });

    var but = document.querySelector('#mini')
    but.onclick = function () {
      ipcRenderer.send('mini', "mini")
    }
    var but = document.querySelector('#EXT')
    but.onclick = function () {
      ipcRenderer.send('ext', "ext")
    }
    var but = document.querySelector('#max')
    but.onclick = function () {
      ipcRenderer.send('max', "max")
    }
    var myArray2;

    // 监听来自主进程的消息
    ipcRenderer.on('from-main', (event, data) => {

      // 你可以在这里更新 DOM 或执行其他操作
      let myArrayString2 = JSON.stringify(data.message2[0]);
      myArray2 = myArrayString2
      console.log(data.message2);
      sessionStorage.setItem('adb2', myArrayString2);
    });
    // 监听来自主进程的消息
    ipcRenderer.on('from-wlgx', (event, data) => {

      // 你可以在这里更新 DOM 或执行其他操作
      console.log(data.message1);
      sessionStorage.setItem('wlgx', data.message1);
    });
    // 监听来自主进程的消息
    ipcRenderer.on('from-bdgx', (event, data) => {

      // 你可以在这里更新 DOM 或执行其他操作
      console.log(parseFloat(data.message1));
      sessionStorage.setItem('bdgx', data.message1);
    });


    function URLS(value, kz) {
      if (s != 0) {
        s = 0;
        document.getElementById("URL3").style.top = "100%";
      }
      const iframe = document.getElementById('URL');
      const iframe2 = document.getElementById('URL2');
      if (iframe.src != "file:///C:/electron/dem/src/" + value) {
        const element = document.querySelectorAll('#URL');
        element.forEach(element => {
          element.style.filter = 'blur(100px)';
        });
        iframe2.src = '404.html';
        console.log(iframe.src);
        console.log("6" + value);
        iframe.classList.add('fade-out'); // 触发淡出
        iframe2.classList.add('fade2-out');

        // 新内容加载完成后淡入
        setTimeout(() => {
          iframe.src = value;

          iframe.onload = () => {
            setTimeout(() => {
              iframe.classList.remove('fade-out');
              iframe2.classList.remove('fade2-out');
            }, 500)
          }
          const element = document.querySelectorAll('#URL');
          element.forEach(element => {
            element.style.filter = 'blur(0px)';
          });
        }, 500);

        //  document.getElementById("URL").src = value
        // 获取所有类名为 zst 的元素
        const divElements = document.getElementsByClassName('zst');

        // 遍历所有类名为 zst 的元素，将背景颜色设置为透明
        for (let i = 0; i < divElements.length; i++) {
          divElements[i].style.backgroundColor = '';
          divElements[i].style.height = '0';
        }

        // 获取 div 元素
        const zstElement = document.querySelector(kz);
        // 修改 zstElement 的背景颜色为红色
        zstElement.style.backgroundColor = 'rgb(0, 196, 0)';

        zstElement.classList.add('fade-out2');
        setTimeout(() => {
          zstElement.classList.remove('fade-out2');
        }, 500),
          zstElement.style.height = '60px';
      }
    }

    function YT(value, kz) {
      if (s == 0) {
        s = s + 1;
        document.getElementById("URL3").style.top = "40px";
      } else {
        s = 0;
        document.getElementById("URL3").style.top = "100%";
      }

    }
  </script>


</body>

</html>